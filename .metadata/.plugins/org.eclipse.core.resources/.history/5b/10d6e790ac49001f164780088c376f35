-- SYS계정
CREATE USER BUSKING IDENTIFIED BY 1234; -- 계정생성
GRANT RESOURCE, CONNECT TO BUSKING; -- 권한부여
ALTER USER BUSKING DEFAULT TABLESPACE USERS QUOTA UNLIMITED ON USERS; -- 테이블스페이스 연결

-- BUSKING 계정
CREATE TABLE "USERS" (
	"USER_ID"	VARCHAR2(30)		NOT NULL,
	"USER_PW"	VARCHAR2(30)		NULL,
	"USER_NAME"	VARCHAR2(10)		NULL,
	"USER_EMAIL"	VARCHAR2(30)		NULL,
	"USER_PNO"	NUMBER(11)		NULL,
	"USER_ADDR"	VARCHAR2(100)		NULL
);

CREATE TABLE "MANAGER" (
	"MANAGER_ID"	VARCHAR(30)		NOT NULL,
	"MANAGER_PW"	VARCHAR(30)		NULL,
	"MANAGER_EMAIL"	VARCHAR(30)		NULL,
	"LOCA_ID"	NUMBER(30)		NOT NULL
);

CREATE TABLE "FAQ" (
	"FAQ_NUM"	VARCHAR2(30)		NOT NULL,
	"USER_ID"	VARCHAR2(30)		NOT NULL,
	"FAQ_PW"	VARCHAR2(30)		NULL,
	"FAQ_TITLE"	VARCHAR2(100)		NULL,
	"FAQ_CONTENT"	VARCHAR2(500)		NULL,
	"FAQ_REGDATE"	DATE		NULL,
	"FAQ_REPLY"	VARCHAR2(300)		NULL,
	"MANAGER_ID"	VARCHAR(30)		NOT NULL
);

CREATE TABLE "BOARD_NEWS" (
	"NEWS_NUM"	NUMBER(10)		NOT NULL,
	"NEWS_ID"	VARCHAR2(30)		NULL,
	"NEWS_TITLE"	VARCHAR2(30)		NULL,
	"NEWS_CONTENT"	VARCHAR2(500)		NULL,
	"NEWS_REGDATE"	DATE		NULL,
	"NEWS_HIT"	NUMBER(30)		NULL,
	"NEWS_CMT_COUNT"	NUMBER(30)		NULL,
	"NEWS_LIKE_COUNT"	NUMBER(30)		NULL,
	"USER_ID"	VARCHAR2(30)		NOT NULL
);

CREATE TABLE "RESERVATIONS" (
	"RES_NUM"	NUMBER(30)		NOT NULL,
	"USER_ID"	VARCHAR2(30)		NOT NULL,
	"LOCA_ID"	NUMBER(30)		NOT NULL,
	"RES_DATE"	DATE		NULL,
	"RES_REGDATE"	DATE	DEFAULT SYSDATE	NULL,
	"RES_COUNT"	NUMBER(30)		NULL,
	"RES_CONTENT"	VARCHAR2(500)		NULL,
	"RES_AMP"	VARCHAR2(30)		NULL,
	"RES_RESULT"	T / F		NULL,
	"DATE_NUM"	NUMBER(30)		NOT NULL
);

CREATE TABLE "BOARD_FREE" (
	"FREE_NUM"	VARCHAR(30)		NOT NULL,
	"USER_ID"	VARCHAR2(30)		NOT NULL,
	"FREE_TITLE"	VARCHAR(100)		NULL,
	"FREE_CONTENT"	VARCHAR(500)		NULL,
	"FREE_REGDATE"	DATE		NULL,
	"FREE_HIT"	NUMBER(30)		NULL,
	"FREE_CMT_COUNT"	NUMBER(30)		NULL,
	"FREE_LIKE_COUNT"	NUMBER(30)		NULL
);

CREATE TABLE "BOARD_TEAM" (
	"TEAM_NUM"	NUMBER(10)		NOT NULL,
	"USER_ID"	VARCHAR2(30)		NOT NULL,
	"TEAM_TITLE"	VARCHAR2(100)		NULL,
	"TEAM_CONTENT"	VARCHAR2(500)		NULL,
	"TEAM_REGDATE"	DATE		NULL,
	"TEAM_HIT"	NUMBER(100)		NULL,
	"TEAM_RESULT"	CHAR(1)		NULL,
	"TEAM_COUNT"	NUMBER(30)		NULL,
	"TEAM_CMT_COUNT"	NUMBER(30)		NULL,
	"TEAM_LIKE_COUNT"	NUMBER(30)		NULL
);

CREATE TABLE "COMMENT_FREE" (
	"COM_FREE_NUM"	VARCHAR(30)		NOT NULL,
	"USER_ID"	VARCHAR2(30)		NOT NULL,
	"COM_FREE_CONTENT"	VARCHAR(500)		NULL,
	"COM_FREE_REGDATE"	DATE		NULL,
	"FREE_NUM2"	VARCHAR(30)		NOT NULL,
	"COM_FREE_LIKE_COUNT"	VARCHAR(30)		NULL
);

CREATE TABLE "BOARD_ASK" (
	"ASK_NUM"	VARCHAR(30)		NOT NULL,
	"USER_ID"	VARCHAR2(30)		NOT NULL,
	"ASK_CONTENT"	VARCHAR(500)		NULL,
	"ASK_REGDATE"	DATE		NULL,
	"ASK_HIT"	NUMBER(30)		NULL
);

CREATE TABLE "COMMENT_ASK" (
	"COM_ASK_NUM"	VARCHAR(30)		NOT NULL,
	"USER_ID"	VARCHAR2(30)		NOT NULL,
	"COM_ASK_CONTENT"	VARCHAR(500)		NULL,
	"COM_ASK_REGDATE"	DATE		NULL,
	"ASK_NUM2"	VARCHAR(30)		NOT NULL,
	"COM_ASK_LIKE_COUNT"	VARCHAR(30)		NULL
);

CREATE TABLE "NOTICE" (
	"NOTICE_NUM"	VARCHAR2(30)		NOT NULL,
	"MANAGER_ID"	VARCHAR(30)		NOT NULL,
	"NOTICE_TITLE"	VARCHAR2(30)		NULL,
	"NOTICE_CONTENT"	VARCHAR2(500)		NULL,
	"NOTICE_REGDATE"	DATE		NULL,
	"NOTICE_HIT"	NUMBER(10)		NULL
);

CREATE TABLE "COMMENT_TEAM" (
	"COM_TEAM_NUM"	VARCHAR(30)		NOT NULL,
	"USER_ID"	VARCHAR2(30)		NOT NULL,
	"COM_TEAM_CONTENT"	VARCHAR(500)		NULL,
	"COM_TEAM_REGDATE"	DATE		NULL,
	"TEAM_NUM2"	NUMBER(10)		NOT NULL,
	"COM_TEAM_LIKE_COUNT"	VARCHAR(30)		NULL
);

CREATE TABLE "COMMENT_NEWS" (
	"COM_NEWS_NUM"	VARCHAR(30)		NOT NULL,
	"USER_ID"	VARCHAR2(30)		NOT NULL,
	"COM_NEWS_CONTENT"	VARCHAR(500)		NULL,
	"COM_NEWS_REGDATE"	DATE		NULL,
	"NEWS_NUM2"	NUMBER(10)		NOT NULL,
	"COM_NEWS_LIKE_COUNT"	VARCHAR(30)		NULL
);

CREATE TABLE "BUSKING" (
	"DATE_NUM"	NUMBER(30)		NOT NULL,
	"RES_DATE"	DATE		NULL,
	"RES_LOCA"	VARCHAR2(30)		NULL
);

CREATE TABLE "LOCATIONS" (
	"LOCA_ID"	NUMBER(30)		NOT NULL,
	"LOCA_NAME"	VARCHAR(30)		NULL,
	"LOCA_INFO"	VARCHAR(500)	DEFAULT SYSDATE	NULL,
	"LOCA_PIC"	VARCHAR(30)		NULL,
	"LOCA_POINT_X"	VARCHAR(30)		NULL,
	"LOCA_POINT_Y"	VARCHAR(30)		NULL
);

CREATE TABLE "LOCA_COMMENT" (
	"LOCA_CMT_NUM"	VARCHAR(30)		NOT NULL,
	"USER_ID"	VARCHAR2(30)		NOT NULL,
	"LOCA_ID"	NUMBER(30)		NOT NULL,
	"LOCA_CONTENT"	VARCHAR(500)		NULL,
	"LOCA_CMT_REGDATE"	DATE		NULL,
	"LOCA_SCORE"	NUMBER(10)		NULL
);

ALTER TABLE "USERS" ADD CONSTRAINT "PK_USERS" PRIMARY KEY (
	"USER_ID"
);

ALTER TABLE "MANAGER" ADD CONSTRAINT "PK_MANAGER" PRIMARY KEY (
	"MANAGER_ID"
);

ALTER TABLE "FAQ" ADD CONSTRAINT "PK_FAQ" PRIMARY KEY (
	"FAQ_NUM"
);

ALTER TABLE "BOARD_NEWS" ADD CONSTRAINT "PK_BOARD_NEWS" PRIMARY KEY (
	"NEWS_NUM"
);

ALTER TABLE "RESERVATIONS" ADD CONSTRAINT "PK_RESERVATIONS" PRIMARY KEY (
	"RES_NUM"
);

ALTER TABLE "BOARD_FREE" ADD CONSTRAINT "PK_BOARD_FREE" PRIMARY KEY (
	"FREE_NUM"
);

ALTER TABLE "BOARD_TEAM" ADD CONSTRAINT "PK_BOARD_TEAM" PRIMARY KEY (
	"TEAM_NUM"
);

ALTER TABLE "COMMENT_FREE" ADD CONSTRAINT "PK_COMMENT_FREE" PRIMARY KEY (
	"COM_FREE_NUM"
);

ALTER TABLE "BOARD_ASK" ADD CONSTRAINT "PK_BOARD_ASK" PRIMARY KEY (
	"ASK_NUM"
);

ALTER TABLE "COMMENT_ASK" ADD CONSTRAINT "PK_COMMENT_ASK" PRIMARY KEY (
	"COM_ASK_NUM"
);

ALTER TABLE "NOTICE" ADD CONSTRAINT "PK_NOTICE" PRIMARY KEY (
	"NOTICE_NUM"
);

ALTER TABLE "COMMENT_TEAM" ADD CONSTRAINT "PK_COMMENT_TEAM" PRIMARY KEY (
	"COM_TEAM_NUM"
);

ALTER TABLE "COMMENT_NEWS" ADD CONSTRAINT "PK_COMMENT_NEWS" PRIMARY KEY (
	"COM_NEWS_NUM"
);

ALTER TABLE "BUSKING" ADD CONSTRAINT "PK_BUSKING" PRIMARY KEY (
	"DATE_NUM"
);

ALTER TABLE "LOCATIONS" ADD CONSTRAINT "PK_LOCATIONS" PRIMARY KEY (
	"LOCA_ID"
);

ALTER TABLE "LOCA_COMMENT" ADD CONSTRAINT "PK_LOCA_COMMENT" PRIMARY KEY (
	"LOCA_CMT_NUM"
);

-- TABLE DROP 명령어
DROP TABLE USERS;
DROP TABLE MANAGER;
DROP TABLE FAQ;
DROP TABLE BOARD_NEWS;
DROP TABLE BOARD_FREE;
DROP TABLE BOARD_TEAM;
DROP TABLE BOARD_ASK;
DROP TABLE COMMENT_FREE;
DROP TABLE COMMENT_NEWS;
DROP TABLE COMMENT_ASK;
DROP TABLE COMMENT_TEAM;
DROP TABLE RESERVATIONS;
DROP TABLE NOTICE;
DROP TABLE BUSKING;
DROP TABLE LOCATIONS;
DROP TABLE LOCA_COMMENT;

-- 게시판 글, 댓글 시퀀스 생성
CREATE SEQUENCE BOARD_ASK_SEQ NOCACHE;
CREATE SEQUENCE BOARD_FREE_SEQ NOCACHE;
CREATE SEQUENCE BOARD_NEWS_SEQ NOCACHE;
CREATE SEQUENCE BOARD_TEAM_SEQ NOCACHE;

CREATE SEQUENCE COMMENT_ASK_SEQ NOCACHE;
CREATE SEQUENCE COMMENT_FREE_SEQ NOCACHE;
CREATE SEQUENCE COMMENT_NEWS_SEQ NOCACHE;
CREATE SEQUENCE COMMENT_TEAM_SEQ NOCACHE;

-- 게시판 컬럼명 USER_ID 를 게시판_WRITER 로 수정
ALTER TABLE BOARD_FREE RENAME COLUMN USER_ID TO FREE_WRITER;
ALTER TABLE BOARD_ASK RENAME COLUMN USER_ID TO ASK_WRITER; 
ALTER TABLE BOARD_TEAM RENAME COLUMN USER_ID TO TEAM_WRITER; 
ALTER TABLE BOARD_NEWS RENAME COLUMN NEWS_ID TO NEWS_WRITER; 

-- 게시판 내용 데이터 크기 변경
ALTER TABLE BOARD_FREE MODIFY FREE_CONTENT LONG;
ALTER TABLE BOARD_NEWS MODIFY NEWS_CONTENT LONG;
ALTER TABLE BOARD_TEAM MODIFY TEAM_CONTENT LONG;
ALTER TABLE BOARD_ASK MODIFY ASK_CONTENT LONG;

-- 게시판 조회수, 좋아요수, 댓글수 DEFAULT 값 수정
ALTER TABLE BOARD_FREE MODIFY FREE_HIT DEFAULT 0;
ALTER TABLE BOARD_FREE MODIFY FREE_LIKE_COUNT DEFAULT 0;
ALTER TABLE BOARD_FREE MODIFY FREE_CMT_COUNT DEFAULT 0;

ALTER TABLE BOARD_NEWS MODIFY NEWS_HIT DEFAULT 0;
ALTER TABLE BOARD_NEWS MODIFY NEWS_LIKE_COUNT DEFAULT 0;
ALTER TABLE BOARD_NEWS MODIFY NEWS_CMT_COUNT DEFAULT 0;

ALTER TABLE BOARD_TEAM MODIFY TEAM_HIT DEFAULT 0;
ALTER TABLE BOARD_TEAM MODIFY TEAM_LIKE_COUNT DEFAULT 0;
ALTER TABLE BOARD_TEAM MODIFY TEAM_CMT_COUNT DEFAULT 0;

-- 소식게시판 USER_ID 컬럼 삭제
ALTER TABLE BOARD_NEWS DROP COLUMN USER_ID;

-- 게시판 NOT NULL 적용, PK VARCHAR2(30) 으로 수정
ALTER TABLE BOARD_NEWS MODIFY NEWS_TITLE VARCHAR2(100);
ALTER TABLE BOARD_NEWS MODIFY NEWS_NUM VARCHAR2(30);
ALTER TABLE BOARD_NEWS MODIFY NEWS_WRITER NOT NULL;
ALTER TABLE BOARD_NEWS MODIFY NEWS_CONTENT NOT NULL;
ALTER TABLE BOARD_NEWS MODIFY NEWS_TITLE NOT NULL;

ALTER TABLE BOARD_FREE MODIFY FREE_NUM VARCHAR2(30);
ALTER TABLE BOARD_FREE MODIFY FREE_WRITER NOT NULL;
ALTER TABLE BOARD_FREE MODIFY FREE_CONTENT NOT NULL;
ALTER TABLE BOARD_FREE MODIFY FREE_TITLE NOT NULL;

ALTER TABLE BOARD_TEAM MODIFY TEAM_NUM VARCHAR2(30);
ALTER TABLE BOARD_TEAM MODIFY TEAM_WRITER NOT NULL;
ALTER TABLE BOARD_TEAM MODIFY TEAM_CONTENT NOT NULL;
ALTER TABLE BOARD_TEAM MODIFY TEAM_TITLE NOT NULL;

-- 댓글 테이블 컬럼명 수정, CONTENT 컬럼 NOT NULL 적용
ALTER TABLE COMMENT_NEWS RENAME COLUMN USER_ID TO COM_NEWS_WRITER; 
ALTER TABLE COMMENT_FREE RENAME COLUMN USER_ID TO COM_FREE_WRITER; 
ALTER TABLE COMMENT_TEAM RENAME COLUMN USER_ID TO COM_TEAM_WRITER; 
ALTER TABLE COMMENT_ASK RENAME COLUMN USER_ID TO COM_ASK_WRITER; 

ALTER TABLE COMMENT_NEWS RENAME COLUMN NEWS_NUM2 TO COM_NEWS_BNO;
ALTER TABLE COMMENT_FREE RENAME COLUMN FREE_NUM2 TO COM_FREE_BNO;
ALTER TABLE COMMENT_TEAM RENAME COLUMN TEAM_NUM2 TO COM_TEAM_BNO;
ALTER TABLE COMMENT_ASK RENAME COLUMN ASK_NUM2 TO COM_ASK_BNO;

ALTER TABLE COMMENT_NEWS MODIFY COM_NEWS_CONTENT NOT NULL;
ALTER TABLE COMMENT_FREE MODIFY COM_FREE_CONTENT NOT NULL;
ALTER TABLE COMMENT_TEAM MODIFY COM_TEAM_CONTENT NOT NULL;
ALTER TABLE COMMENT_ASK MODIFY COM_ASK_CONTENT NOT NULL;

-- 대댓글 기능 위한 REPLY, GROUP 컬럼 추가
ALTER TABLE COMMENT_NEWS ADD COM_NEWS_REPLY VARCHAR2(30);
ALTER TABLE COMMENT_FREE ADD COM_FREE_REPLY VARCHAR2(30);
ALTER TABLE COMMENT_TEAM ADD COM_TEAM_REPLY VARCHAR2(30);

ALTER TABLE COMMENT_NEWS ADD COM_NEWS_GROUP VARCHAR2(30) NOT NULL; 
ALTER TABLE COMMENT_FREE ADD COM_FREE_GROUP VARCHAR2(30) NOT NULL;
ALTER TABLE COMMENT_TEAM ADD COM_TEAM_GROUP VARCHAR2(30) NOT NULL;

-- 댓글 글번호FK BNO 컬럼 타입 VARCHAR2(30)으로 변경
ALTER TABLE COMMENT_NEWS MODIFY COM_NEWS_BNO VARCHAR2(30);
ALTER TABLE COMMENT_TEAM MODIFY COM_TEAM_BNO VARCHAR2(30);

--USER 테이블 주소 용량 변경
ALTER TABLE USERS MODIFY USER_ADDR CLOB;

<<<<<<< HEAD
--NOTICE 게시판 데이터 타입 변경
ALTER TABLE FAQ MODIFY(FAQ_NUM VARCHAR2(30));
ALTER TABLE NOTICE MODIFY(NOTICE_NUM VARCHAR2(30));
=======
--USER_GENDER 필드 추가
ALTER TABLE USERS ADD USER_GENDER VARCHAR2(10) NULL;

--USER_PNO 타입변경
ALTER TABLE USERS MODIFY USER_PNO VARCHAR2(15);
>>>>>>> jinseok
